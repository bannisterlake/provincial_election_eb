(this["webpackJsonpvizzion-client"]=this["webpackJsonpvizzion-client"]||[]).push([[0],{18:function(t,e,a){t.exports=a(43)},23:function(t,e,a){},43:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),i=a(17),r=a.n(i),s=a(2),c=(a(23),a(53)),l=a(5),m=a.n(l),u=(Object(c.a)({seat:function(t){return{height:20,minWidth:"4%",margin:"0.2%",backgroundColor:t.color,flexShrink:1,fontSize:function(t){return"true"===t.small?8:10}}}}),Object(c.a)({partyContainer:{width:"20%"},party:function(t){return{display:"flex",alignItems:"center",fontWeight:"bold",letterSpacing:2,padding:"5px 5px",margin:1,borderRadius:5,color:"white",justifyItems:"center",justifyContent:"space-between",backgroundColor:t.color}},popVote:{padding:5,fontWeight:"bold"}})),d=function(t){var e=u(t);return o.a.createElement("div",{className:e.partyContainer},o.a.createElement("div",{className:e.party},o.a.createElement("div",null,t.name),o.a.createElement("div",null,t.seats)),o.a.createElement("div",{className:e.popVote},"Pop vote: ",t.votes,"%"))},p=a(6),f=Object(c.a)({meter:{maxWidth:"95%",position:"relative",minHeight:"20px"},bar:{background:function(t){return t.color},width:function(t){return t.votes},borderRadius:"0px 5px 5px 0px",height:10,margin:2,animationName:"animate-bar",animationDuration:"0.5s",transition:"width 300ms ease-in-out",transitionDelay:"100ms",zIndex:20},majorityLine:{position:"absolute",height:"120%",minHeight:"20px",bottom:-2,borderLeft:"2px solid black",transition:"left 300ms ease-in-out"},majorityLabel:{position:"absolute",textAlign:"left",bottom:50,marginLeft:-7,fontWeight:"bolder",transition:"right 300ms ease-in-out"}});function b(t){t.color,t.votes;var e=Object(p.a)(t,["color","votes"]),a=f(t);return o.a.createElement("div",Object.assign({className:"animate-bar ".concat(a.bar)},e))}var g=function(t){var e=Object(n.useState)(25),a=Object(s.a)(e,2),i=a[0],r=a[1],c=Object(n.useState)(0),l=Object(s.a)(c,2),m=(l[0],l[1],Object(n.useState)(50)),u=Object(s.a)(m,2),d=u[0],p=u[1],g=Object(n.useState)(0),j=Object(s.a)(g,2),v=(j[0],j[1],f(t));Object(n.useEffect)((function(){if(t.data){var e=t.data.partyResults[0];console.log("leading",t.majority,e.seats),e.seats>=t.majority?(r(e.seats),p(t.majority/e.seats*100)):(r(t.majority),p(t.majority/t.majority*100))}}),[t.data]);var y=t.majority/t.seatTotal*100;return o.a.createElement("div",{className:v.meter},o.a.createElement("div",{className:v.majorityLabel,style:{right:"".concat(100-d,"%")}},t.majority," seats needed for majority"),t.data&&t.data.partyResults.map((function(t,e){if(console.log("max seats",i),e<3)return o.a.createElement(b,{color:t.color,votes:"".concat(t.seats/i*100,"%")})})),console.log("majority",y),o.a.createElement("div",{className:v.majorityLine,style:{left:"".concat(d,"%")}}))},j=Object(c.a)({main:{display:"flex",position:"relative",flexDirection:"column",padding:"10px 10px",backgroundColor:"#ededf0"},titleRow:{display:"flex",padding:"0px 5px 5px 5px",justifyContent:"space-between"},title:{fontSize:function(t){return t.small?18:26},fontWeight:"bold"},barchart:{fontSize:function(t){return t.small?8:14},display:"flex",padding:"20px 0",flexDirection:"column-reverse",flexWrap:"wrap"},partyMap:{fontSize:function(t){return t.small?9:18},display:"flex",flexWrap:"wrap",alignContent:"left"},update:{padding:"15px 5px",fontSize:function(t){return t.small?8:12}}}),v=function(t){var e=j(t),a=Object(n.useState)(null),i=Object(s.a)(a,2),r=i[0],c=i[1],l=Object(n.useState)(""),u=Object(s.a)(l,2),p=u[0],f=u[1],b=Object(n.useState)(3e5),v=Object(s.a)(b,2),y=v[0],h=(v[1],Object(n.useState)(49)),x=Object(s.a)(h,2),O=x[0];x[1];Object(n.useEffect)((function(){console.log("Updating every ".concat(y/1e3," seconds")),m.a.get("/title").then((function(t){console.log(t),200===t.status&&(console.log(t),f(t.data))})).catch((function(t){return console.log("error setting title")})),E(),S()}),[]);var E=function(){setInterval((function(){S()}),y)},S=function(){console.log("fetching"),m.a.get("/overallresults").then((function(t){console.log(t.data),200===t.status&&c(t.data)})).catch((function(t){console.log("Error fetching results")}))},w=[],N="";return r&&(r.partyResults.map((function(e,a){e.seats>0&&w.push(o.a.createElement(d,{small:t.small,key:"".concat(e,"-").concat(a),name:e.nameShort,seats:e.seats,votes:e.votesPercent,color:e.color}))})),N=new Date(r.generated)),o.a.createElement("div",{className:e.main},o.a.createElement("div",{className:e.titleRow},o.a.createElement("div",{className:e.title},p)),r&&r.partyResults[0].seats>0&&o.a.createElement("div",{className:e.barchart},o.a.createElement(g,{seatTotal:O,majority:25,majorityPercent:25/O*100,data:r})),o.a.createElement("div",{className:e.partyMap},w),r&&o.a.createElement("div",{className:e.update},"Last updated: ",N&&N.toString()))},y=window.screen.width<500;r.a.render(o.a.createElement(v,{small:y?"true":void 0}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.3938c03d.chunk.js.map