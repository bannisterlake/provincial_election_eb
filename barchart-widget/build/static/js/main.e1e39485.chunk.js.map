{"version":3,"sources":["components/Seat.js","components/Party.js","components/MajorityMeter.js","App.js","index.js"],"names":["styles","makeStyles","seat","props","height","minWidth","margin","backgroundColor","color","flexShrink","Seat","classes","key","party","el","className","partyContainer","width","display","alignItems","fontWeight","letterSpacing","padding","borderRadius","justifyItems","justifyContent","popVote","Party","name","seats","votes","useStyles","meter","marginLeft","position","minHeight","bar","background","animationName","animationDuration","majorityLine","bottom","left","majority","borderLeft","majorityLabel","textAlign","marginTop","Bar","other","Line","style","data","partyResults","map","i","main","flexDirection","titleRow","title","fontSize","small","barchart","flexWrap","partyMap","update","App","useState","setData","useEffect","startTimer","getData","remaining","setInterval","console","log","fetch","then","res","ok","json","catch","err","parties","date","j","push","nameShort","elected","votesPercent","length","seatsRemaining","k","Date","generated","MajorityMeter","toString","screenSize","window","screen","ReactDOM","render","undefined","document","getElementById"],"mappings":"8MAIMA,EAASC,YAAW,CACtBC,KAAM,SAAAC,GAAK,MAAI,CACXC,OAAQ,GACRC,SAAU,KACVC,OAAQ,OACRC,gBAAkBJ,EAAMK,MACxBC,WAAY,MAWLC,EAPF,SAACP,GAEV,IAAMQ,EAAUX,EAAOG,GAEvB,OAAO,yBAAKS,IAAG,UAAKT,EAAMU,MAAX,YAAoBV,EAAMW,IAAMC,UAAWJ,EAAQT,QCdhEF,EAASC,YAAW,CACtBe,eAAgB,CACZC,MAAO,OAGXJ,MAAO,SAAAV,GAAK,MAAI,CACZe,QAAS,OACTC,WAAY,SACZC,WAAY,OACZC,cAAe,EACfC,QAAS,UACThB,OAAQ,EACRiB,aAAc,EACdf,MAAO,QACPgB,aAAc,SACdC,eAAgB,gBAChBlB,gBAAiBJ,EAAMK,QAE3BkB,QAAS,CACLJ,QAAS,EACTF,WAAY,UAqBLO,EAjBD,SAACxB,GAEX,IAAMQ,EAAUX,EAAOG,GAEvB,OACI,yBAAKY,UAAWJ,EAAQK,gBACpB,yBAAKD,UAAWJ,EAAQE,OACpB,6BAAMV,EAAMyB,MACZ,6BAAMzB,EAAM0B,QAEhB,yBAAKd,UAAWJ,EAAQe,SAAxB,aACevB,EAAM2B,MADrB,O,OChCNC,EAAY9B,YAAW,CACzB+B,MAAO,CACHf,MAAO,OACPgB,WAAY,GACZC,SAAU,WACVC,UAAW,QAGfC,IAAK,CACHC,WAAY,SAAClC,GAAD,OACVA,EAAMK,OACRS,MAAO,SAACd,GAAD,OAAWA,EAAM2B,OACxBP,aAAc,kBACdnB,OAAQ,GACRE,OAAQ,EACRgC,cAAe,cACfC,kBAAmB,QAErBC,aAAc,CACVN,SAAU,WACV9B,OAAQ,OACR+B,UAAW,OACXM,QAAS,EACTC,KAAM,SAACvC,GAAD,OAASA,EAAMwC,UACrBC,WAAY,mBAEhBC,cAAe,CACXX,SAAU,WACVY,UAAW,OACXC,WAAY,GACZd,YAAa,EACbb,WAAY,YAOpB,SAAS4B,EAAI7C,GAE0BA,EAA3BK,MAA2BL,EAApB2B,MAFC,IAESmB,EAFT,YAEmB9C,EAFnB,mBAGVQ,EAAUoB,EAAU5B,GAC1B,OAAO,uCAAKY,UAAS,sBAAiBJ,EAAQyB,MAAWa,IAG7D,SAASC,EAAK/C,GAC4BA,EAA9BK,MAA8BL,EAAvBwC,SADG,IACUM,EADX,YACqB9C,EADrB,sBAEXQ,EAAUoB,EAAU5B,GAC1B,OAAO,uCAAKY,UAAWJ,EAAQ6B,cAAkBS,IAGrD,IA6BevC,EA7BF,SAACP,GAIV,IAAMQ,EAAUoB,EAAU5B,GAItBwC,EAAW,GAAG,GAAG,IAErB,OACI,yBAAK5B,UAAWJ,EAAQqB,OACpB,yBAAKjB,UAAWJ,EAAQkC,cAAeM,MAAO,CAACT,KAAK,GAAD,OAAKC,EAAL,OAAnD,gCACCxC,EAAMiD,MAAQjD,EAAMiD,KAAKC,aAAaC,KAAI,SAACzC,EAAO0C,GAK/C,GAJU,IAANA,IACO1C,EAAMgB,MACbc,EAAQ,UAAM9B,EAAMgB,MAAM,GAAG,IAArB,MAER0B,EAAI,GAAK1C,EAAMgB,MAAQ,EACvB,OAAO,kBAACmB,EAAD,CAAKxC,MAAOK,EAAML,MAAOsB,MAAK,UAAMjB,EAAMgB,MAAM,GAAI,IAAtB,UAI7C,kBAACqB,EAAD,CAAM1C,MAAO,MAAOmC,SAAQ,YCvElC3C,EAASC,YAAW,CACzBuD,KAAM,CAELtC,QAAS,OACTgB,SAAU,WACVuB,cAAe,SACfnC,QAAS,YACTf,gBAAiB,WAElBmD,SAAU,CACTxC,QAAS,OACTI,QAAS,kBACTG,eAAgB,iBAEjBkC,MAAO,CACNC,SAAU,SAAAzD,GAAK,OAAIA,EAAM0D,MAAQ,GAAI,IACrCzC,WAAY,QAEb0C,SAAU,CACTF,SAAU,SAAAzD,GAAK,OAAGA,EAAM0D,MAAQ,GAAK,IAErC3C,QAAS,OACTI,QAAS,SACTmC,cAAe,iBACfM,SAAU,QAEXC,SAAU,CACTJ,SAAU,SAAAzD,GAAK,OAAEA,EAAM0D,MAAQ,GAAK,IACpC3C,QAAS,OACTO,eAAgB,gBAEjBwC,OAAQ,CACP3C,QAAS,WACTsC,SAAU,SAAAzD,GAAK,OAAEA,EAAM0D,MAAQ,GAAK,OAyFvBK,EArFH,SAAC/D,GAEZ,IAAMQ,EAAUX,EAAOG,GAFD,EAGEgE,mBAAS,MAHX,mBAGff,EAHe,KAGTgB,EAHS,KAKtBC,qBAAU,WACTC,IACAC,MACC,IAEF,IAAMD,EAAa,WAClB,IAAIE,EAAY,GAChBC,aAAY,aACXD,GACiB,IAChBE,QAAQC,IAAI,YACZJ,IACAC,EAAY,MAEX,MAIED,EAAU,WACfG,QAAQC,IAAI,YACZC,MAAM,mBACJC,MAAK,SAAAC,GACL,GAAIA,EAAIC,GACP,OAAOD,EAAIE,UAGZH,MAAK,SAAAG,GAAI,OACTZ,EAAQY,MAERC,OAAM,SAAAC,GACNR,QAAQC,IAAI,8BAKT9C,EAAQ,GAERsD,EAAU,GAEZC,EAAO,GAEX,GAAIhC,EAAM,CAOT,GANAA,EAAKC,aAAaC,KAAI,SAACzC,EAAO0C,GAC7B,IAAK,IAAI8B,EAAE,EAAGA,EAAIxE,EAAMgB,MAAOwD,IAC9BxD,EAAMyD,KAAK,kBAAC,EAAD,CAAM1E,IAAG,UAAKC,EAAM0E,UAAX,YAAwBF,GAAK7E,MAAOK,EAAML,SAE/D2E,EAAQG,KAAK,kBAAC,EAAD,CAAO1E,IAAG,UAAKC,EAAL,YAAc0C,GAAK3B,KAAMf,EAAM0E,UAAW1D,MAAOhB,EAAM2E,QAAS1D,MAAOjB,EAAM4E,aAAcjF,MAAOK,EAAML,YAE5HqB,EAAM6D,OAAS,GAElB,IADA,IAAIC,EAAiB,GAAG9D,EAAM6D,OACrBE,EAAE,EAAGA,EAAID,EAAgBC,IACjC/D,EAAMyD,KAAK,kBAAC,EAAD,CAAM1E,IAAG,eAAUgF,GAAKpF,MAAO,aAG5C4E,EAAO,IAAIS,KAAKzC,EAAK0C,gBAGrB,IAAK,IAAIvC,EAAI,EAAGA,EAAI,GAAIA,IACvB1B,EAAMyD,KAAK,kBAAC,EAAD,CAAM1E,IAAG,eAAU2C,GAAK/C,MAAO,aAK5C,OACC,yBAAKO,UAAWJ,EAAQ6C,MACvB,yBAAKzC,UAAWJ,EAAQ+C,UACvB,yBAAK3C,UAAWJ,EAAQgD,OAAxB,+BAECP,GAAQA,EAAKC,aAAa,GAAGvB,MAAQ,GAAO,yBAAKf,UAAWJ,EAAQmD,UACrE,kBAACiC,EAAD,CAAe3C,KAAMA,KAEtB,yBAAKrC,UAAWJ,EAAQqD,UACtBmB,GAGD/B,GAAQ,yBAAKrC,UAAWJ,EAAQsD,QAAxB,iBAA+CmB,GAAQA,EAAKY,cC1HpEC,EAAYC,OAAOC,OAAOlF,MAAQ,IAEtCmF,IAASC,OAAO,kBAAC,EAAD,CAAKxC,MAAOoC,EAAa,YAASK,IAAcC,SAASC,eAAe,U","file":"static/js/main.e1e39485.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst styles = makeStyles({\r\n    seat: props=> ({\r\n        height: 20, \r\n        minWidth: '4%',\r\n        margin: '0.2%',\r\n        backgroundColor:  props.color,\r\n        flexShrink: 1\r\n    })\r\n})\r\n\r\nconst Seat = (props) => {\r\n    \r\n    const classes = styles(props)\r\n    \r\n    return <div key={`${props.party}-${props.el}`} className={classes.seat}/>\r\n}\r\n\r\nexport default Seat;","import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst styles = makeStyles({\r\n    partyContainer: {\r\n        width: '20%',\r\n\r\n    },\r\n    party: props=> ({\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        fontWeight: 'bold',\r\n        letterSpacing: 2,\r\n        padding: '5px 5px',\r\n        margin: 1,\r\n        borderRadius: 5,\r\n        color: 'white',\r\n        justifyItems: 'center',\r\n        justifyContent: 'space-between',\r\n        backgroundColor: props.color \r\n    }),\r\n    popVote: {\r\n        padding: 5,\r\n        fontWeight: 'bold'\r\n    }\r\n})\r\n\r\nconst Party = (props) => {\r\n    \r\n    const classes = styles(props)\r\n    \r\n    return (\r\n        <div className={classes.partyContainer}>\r\n            <div className={classes.party}>\r\n                <div>{props.name}</div>\r\n                <div>{props.seats}</div>\r\n            </div>\r\n            <div className={classes.popVote}>\r\n                Pop vote: {props.votes}%\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Party;","import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\n// import {CSSTransition} from 'react-transition-group'\r\n\r\nconst useStyles = makeStyles({\r\n    meter: {\r\n        width: '100%',\r\n        marginLeft: 10,\r\n        position: 'relative',\r\n        minHeight: '20px',\r\n\r\n    },\r\n    bar: {\r\n      background: (props) =>\r\n        props.color, \r\n      width: (props) => props.votes,\r\n      borderRadius: '0px 5px 5px 0px',\r\n      height: 10,\r\n      margin: 2,\r\n      animationName: 'animate-bar',\r\n      animationDuration: '0.5s'\r\n    },\r\n    majorityLine: {\r\n        position: 'absolute',\r\n        height: '120%',\r\n        minHeight: '20px',\r\n        bottom: -2,\r\n        left: (props)=>props.majority,\r\n        borderLeft: '2px solid black',\r\n    },\r\n    majorityLabel: {\r\n        position: 'absolute',\r\n        textAlign: 'left',\r\n        marginTop: -25,\r\n        marginLeft: -7,\r\n        fontWeight: 'bolder'\r\n    }\r\n\r\n\r\n  });\r\n  \r\n\r\nfunction Bar(props) {\r\n    // const [width, setWidth] = useState(0)\r\n    const { color, votes, ...other } = props;\r\n    const classes = useStyles(props);\r\n    return <div className={`animate-bar ${classes.bar}`} {...other} />;\r\n}\r\n\r\nfunction Line(props) {\r\n    const { color, majority, ...other } = props;\r\n    const classes = useStyles(props);\r\n    return <div className={classes.majorityLine} {...other} />;\r\n}\r\n\r\nconst Seat = (props) => {\r\n    \r\n    // const { color, ...other } = props;\r\n\r\n    const classes = useStyles(props)\r\n    \r\n    var lead = 61\r\n\r\n    var majority = 31/61*100\r\n\r\n    return (\r\n        <div className={classes.meter}>\r\n            <div className={classes.majorityLabel} style={{left: `${majority}%`}}>31 seats needed for majority</div>\r\n            {props.data && props.data.partyResults.map((party, i)=>{\r\n                if (i === 0) {\r\n                    lead = party.seats\r\n                    majority = `${party.seats/61*100}%`\r\n                }\r\n                if (i < 3 && party.seats > 0) {\r\n                    return <Bar color={party.color} votes={`${(party.seats/61)*100}%`} />\r\n                }\r\n            })    \r\n            }\r\n            <Line color={\"red\"} majority={`50.8%`}/>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Seat;","import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport {makeStyles} from '@material-ui/core/styles';\r\n\r\n//Components\r\nimport Seat from './components/Seat'\r\nimport Party from './components/Party'\r\nimport MajorityMeter from './components/MajorityMeter'\r\n\r\nconst styles = makeStyles({\r\n\tmain: {\r\n\t\t// fontFamily: 'Roboto',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\tflexDirection: 'column',\r\n\t\tpadding: '20px 30px',\r\n\t\tbackgroundColor: '#f2f2f2'\r\n\t},\r\n\ttitleRow: {\r\n\t\tdisplay: 'flex', \r\n\t\tpadding: '0px 5px 5px 5px',\r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: props => props.small ? 20: 26,\r\n\t\tfontWeight: 'bold'\r\n\t},\r\n\tbarchart: {\r\n\t\tfontSize: props=> props.small ? 11 : 14,\r\n\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: '30px 0',\r\n\t\tflexDirection: 'column-reverse',\r\n\t\tflexWrap: 'wrap',\r\n\t},\r\n\tpartyMap: {\r\n\t\tfontSize: props=>props.small ? 14 : 18,\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'space-evenly'\r\n\t},\r\n\tupdate: {\r\n\t\tpadding: '15px 5px',\r\n\t\tfontSize: props=>props.small ? 12 : 14\r\n\t}\r\n})\r\n\r\nconst App = (props) => {\r\n\r\n\tconst classes = styles(props);\r\n\tconst [data, setData] = useState(null)\r\n\r\n\tuseEffect(()=>{\r\n\t\tstartTimer();\r\n\t\tgetData();\r\n\t},[])\r\n\t\r\n\tconst startTimer = () => {\r\n\t\tlet remaining = 30\r\n\t\tsetInterval(()=>{\r\n\t\t\tremaining --;\r\n\t\t\tif (remaining <= 0) {\r\n\t\t\t\tconsole.log(\"updating\")\r\n\t\t\t\tgetData();\r\n\t\t\t\tremaining = 30\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t}\r\n\t\r\n\r\n\tconst getData = () => {\r\n\t\tconsole.log('fetching')\r\n\t\tfetch(`/overallresults`)\r\n\t\t\t.then(res=>{\r\n\t\t\t\tif (res.ok) {\r\n\t\t\t\t\treturn res.json();\r\n\t\t\t\t} \r\n\t\t\t})\r\n\t\t\t.then(json=>\r\n\t\t\t\tsetData(json)\r\n\t\t\t)\r\n\t\t\t.catch(err=>{\r\n\t\t\t\tconsole.log(\"Error fetching results\")\r\n\t\t\t})\r\n\r\n\t}\r\n\r\n\tconst seats = [];\r\n\r\n\tconst parties = [];\r\n\r\n\tvar date = ''\r\n\r\n\tif (data) {\r\n\t\tdata.partyResults.map((party, i)=>{\r\n\t\t\tfor (let j=0; j < party.seats; j ++) {\r\n\t\t\t\tseats.push(<Seat key={`${party.nameShort}-${j}`} color={party.color} />)\r\n\t\t\t}\r\n\t\t\tparties.push(<Party key={`${party}-${i}`} name={party.nameShort} seats={party.elected} votes={party.votesPercent} color={party.color} />)\r\n\t\t})\r\n\t\tif (seats.length < 62) {\r\n\t\t\tlet seatsRemaining = 61-seats.length\r\n\t\t\tfor (let k=0; k < seatsRemaining; k++) {\r\n\t\t\t\tseats.push(<Seat key={`none-${k}`} color={'#cccccc'}/>)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdate = new Date(data.generated)\r\n\r\n\t} else {\r\n\t\tfor (let i = 0; i < 61; i++) {\r\n\t\t\tseats.push(<Seat key={`none-${i}`} color={'#cccccc'} />)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div className={classes.main}>\r\n\t\t\t<div className={classes.titleRow}>\r\n\t\t\t\t<div className={classes.title}>Saskatchewan Election 2020</div>\r\n\t\t\t</div>\r\n\t\t\t{(data && data.partyResults[0].votes > 0 ) && <div className={classes.barchart}>\r\n\t\t\t\t<MajorityMeter data={data}/>\r\n\t\t\t</div>}\r\n\t\t\t<div className={classes.partyMap}>\r\n\t\t\t\t{parties}\r\n\t\t\t</div>\r\n\t\t\t{/* <div className={classes.declaration}>Declaration</div> */}\r\n\t\t\t{data && <div className={classes.update}>Last updated: {date && date.toString()}</div>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App.js\";\r\n\r\nlet screenSize= window.screen.width < 500;\r\n\r\nReactDOM.render(<App small={screenSize ? 'true' : undefined}/>, document.getElementById(\"root\"));"],"sourceRoot":""}