(this["webpackJsonpvizzion-client"]=this["webpackJsonpvizzion-client"]||[]).push([[0],{13:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=a(3),l=(a(13),a(26)),s=Object(l.a)({seat:function(e){return{height:20,minWidth:"4%",margin:"0.2%",backgroundColor:e.color,flexShrink:1}}}),m=function(e){var t=s(e);return r.a.createElement("div",{key:"".concat(e.party,"-").concat(e.el),className:t.seat})},u=Object(l.a)({partyContainer:{width:"20%"},party:function(e){return{display:"flex",alignItems:"center",fontWeight:"bold",fontSize:24,letterSpacing:2,padding:"5px 5px",margin:1,borderRadius:5,color:"white",justifyItems:"center",justifyContent:"space-between",backgroundColor:e.color}},popVote:{padding:5,fontWeight:"bold"}}),d=function(e){var t=u(e);return r.a.createElement("div",{className:t.partyContainer},r.a.createElement("div",{className:t.party},r.a.createElement("div",null,e.name),r.a.createElement("div",null,e.seats)),r.a.createElement("div",{className:t.popVote},"Pop vote: ",e.votes,"%"))},p=a(4),f=Object(l.a)({meter:{width:"100%",marginLeft:10,position:"relative"},bar:{background:function(e){return e.color},width:function(e){return e.votes},borderRadius:"0px 5px 5px 0px",height:10,margin:2,animationName:"animate-bar",animationDuration:"0.5s"},majorityLine:{position:"absolute",height:"120%",bottom:-2,left:function(e){return e.majority},borderLeft:"2px solid black"},majorityLabel:{position:"absolute",textAlign:"center",marginTop:-22,marginLeft:-7,fontSize:14,fontWeight:"bolder"}});function v(e){e.color,e.votes;var t=Object(p.a)(e,["color","votes"]),a=f(e);return r.a.createElement("div",Object.assign({className:"animate-bar ".concat(a.bar)},t))}function b(e){e.color,e.majority;var t=Object(p.a)(e,["color","majority"]),a=f(e);return r.a.createElement("div",Object.assign({className:a.majorityLine},t))}var g=function(e){var t=f(e),a=31/61*100;return r.a.createElement("div",{className:t.meter},r.a.createElement("div",{className:t.majorityLabel,style:{left:"".concat(a,"%")}},"31 seats needed for majority"),e.data&&e.data.partyResults.map((function(e,t){if(0===t&&(e.seats,a="".concat(e.seats/61*100,"%")),t<3&&e.seats>0)return r.a.createElement(v,{color:e.color,votes:"".concat(e.seats/61*100,"%")})})),r.a.createElement(b,{color:"red",majority:"50.8%"}))},y=Object(l.a)({main:{display:"flex",position:"relative",flexDirection:"column",padding:"20px 30px",backgroundColor:"#f2f2f2"},titleRow:{display:"flex",padding:"0px 5px",justifyContent:"space-between"},title:{fontSize:26,fontWeight:"bold"},majorityMeter:{display:"flex",alignItems:"flex-end",textAlign:"right"},barchart:{display:"flex",padding:"30px 0",flexDirection:"column-reverse",flexWrap:"wrap"},partyMap:{display:"flex",justifyContent:"space-evenly"},update:{padding:"15px 5px"}}),h=function(){var e=y(),t=Object(n.useState)(60),a=Object(i.a)(t,2),o=a[0],c=(a[1],Object(n.useState)(null)),l=Object(i.a)(c,2),s=l[0],u=l[1];Object(n.useEffect)((function(){p(),f()}),[]);var p=function(){console.log("updating");var e=o;setInterval((function(){--e<=0&&(f(),e=o.counter)}),1e3)},f=function(){fetch("/overallresults").then((function(e){if(e.ok)return e.json()})).then((function(e){return u(e)}))},v=[],b=[],h="";if(s){if(s.partyResults.map((function(e){for(var t=0;t<e.seats;t++)v.push(r.a.createElement(m,{key:"".concat(e.nameShort,"-").concat(t),color:e.color}));b.push(r.a.createElement(d,{name:e.nameShort,seats:e.elected,votes:e.votesPercent,color:e.color}))})),v.length<62)for(var j=61-v.length,x=0;x<j;x++)v.push(r.a.createElement(m,{key:"none-".concat(x),color:"#cccccc"}));h=new Date(s.generated)}else for(var E=0;E<61;E++)v.push(r.a.createElement(m,{key:"none-".concat(E),color:"#cccccc"}));return r.a.createElement("div",{className:e.main},r.a.createElement("div",{className:e.titleRow},r.a.createElement("div",{className:e.title},"Saskatchewan Election 2020")),r.a.createElement("div",{className:e.barchart},r.a.createElement(g,{data:s})),r.a.createElement("div",{className:e.partyMap},b),s&&r.a.createElement("div",{className:e.update},"Last updated: ",h&&h.toString()))},j=window.screen.width<500;c.a.render(r.a.createElement(h,{small:j?"true":void 0}),document.getElementById("root"))},8:function(e,t,a){e.exports=a(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.25c778c7.chunk.js.map