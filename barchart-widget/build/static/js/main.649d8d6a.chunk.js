(this["webpackJsonpvizzion-client"]=this["webpackJsonpvizzion-client"]||[]).push([[0],{13:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),i=a.n(r),c=a(1),s=(a(13),a(26)),l=(Object(s.a)({seat:function(e){return{height:20,minWidth:"4%",margin:"0.2%",backgroundColor:e.color,flexShrink:1,fontSize:function(e){return"true"===e.small?8:10}}}}),Object(s.a)({partyContainer:{width:"20%"},party:function(e){return{display:"flex",alignItems:"center",fontWeight:"bold",letterSpacing:2,padding:"5px 5px",margin:1,borderRadius:5,color:"white",justifyItems:"center",justifyContent:"space-between",backgroundColor:e.color}},popVote:{padding:5,fontWeight:"bold"}})),u=function(e){var t=l(e);return o.a.createElement("div",{className:t.partyContainer},o.a.createElement("div",{className:t.party},o.a.createElement("div",null,e.name),o.a.createElement("div",null,e.seats)),o.a.createElement("div",{className:t.popVote},"Pop vote: ",e.votes,"%"))},m=a(4),d=Object(s.a)({meter:{maxWidth:"95%",position:"relative",minHeight:"20px"},bar:{background:function(e){return e.color},width:function(e){return e.votes},borderRadius:"0px 5px 5px 0px",height:10,margin:2,animationName:"animate-bar",animationDuration:"0.5s",transition:"width 300ms ease-in-out",transitionDelay:"100ms",zIndex:20},majorityLine:{position:"absolute",height:"120%",minHeight:"20px",bottom:-2,borderLeft:"2px solid black",transition:"left 300ms ease-in-out"},majorityLabel:{position:"absolute",textAlign:"left",bottom:50,marginLeft:-7,fontWeight:"bolder",transition:"right 300ms ease-in-out"}});function f(e){e.color,e.votes;var t=Object(m.a)(e,["color","votes"]),a=d(e);return o.a.createElement("div",Object.assign({className:"animate-bar ".concat(a.bar)},t))}var p=function(e){var t=Object(n.useState)(25),a=Object(c.a)(t,2),r=a[0],i=a[1],s=Object(n.useState)(0),l=Object(c.a)(s,2),u=(l[0],l[1],Object(n.useState)(50)),m=Object(c.a)(u,2),p=m[0],b=m[1],g=Object(n.useState)(0),j=Object(c.a)(g,2),v=(j[0],j[1],d(e));Object(n.useEffect)((function(){if(e.data){var t=e.data.partyResults[0];console.log("leading",e.majority,t.seats),t.seats>=e.majority?(i(t.seats),b(e.majority/t.seats*100)):(i(e.majority),b(e.majority/e.majority*100))}}),[e.data]);var y=e.majority/e.seatTotal*100;return o.a.createElement("div",{className:v.meter},o.a.createElement("div",{className:v.majorityLabel,style:{right:"".concat(100-p,"%")}},e.majority," seats needed for majority"),e.data&&e.data.partyResults.map((function(e,t){if(console.log("max seats",r),t<3)return o.a.createElement(f,{color:e.color,votes:"".concat(e.seats/r*100,"%")})})),console.log("majority",y),o.a.createElement("div",{className:v.majorityLine,style:{left:"".concat(p,"%")}}))},b=Object(s.a)({main:{display:"flex",position:"relative",flexDirection:"column",padding:"10px 10px",backgroundColor:"#ededf0"},titleRow:{display:"flex",padding:"0px 5px 5px 5px",justifyContent:"space-between"},title:{fontSize:function(e){return e.small?18:26},fontWeight:"bold"},barchart:{fontSize:function(e){return e.small?8:14},display:"flex",padding:"30px 0",flexDirection:"column-reverse",flexWrap:"wrap"},partyMap:{fontSize:function(e){return e.small?9:18},display:"flex",flexWrap:"wrap",alignContent:"left"},update:{padding:"15px 5px",fontSize:function(e){return e.small?8:12}}}),g=function(e){var t=b(e),a=Object(n.useState)(null),r=Object(c.a)(a,2),i=r[0],s=r[1],l=Object(n.useState)(""),m=Object(c.a)(l,2),d=m[0],f=m[1],g=Object(n.useState)(3e5),j=Object(c.a)(g,2),v=j[0],y=(j[1],Object(n.useState)(49)),h=Object(c.a)(y,2),x=h[0];h[1];Object(n.useEffect)((function(){console.log("Updating every ".concat(v/1e3," seconds")),fetch("/title").then((function(e){return e.text()})).then((function(e){return f(e)})).catch((function(e){return console.log("error setting title")})),O(),E()}),[]);var O=function(){setInterval((function(){E()}),1e4)},E=function(){console.log("fetching"),fetch("/overallresults").then((function(e){if(e.ok)return e.json()})).then((function(e){return s(e)})).catch((function(e){console.log("Error fetching results")}))},S=[],w="";return i&&(i.partyResults.map((function(t,a){t.seats>0&&S.push(o.a.createElement(u,{small:e.small,key:"".concat(t,"-").concat(a),name:t.nameShort,seats:t.seats,votes:t.votesPercent,color:t.color}))})),w=new Date(i.generated)),o.a.createElement("div",{className:t.main},o.a.createElement("div",{className:t.titleRow},o.a.createElement("div",{className:t.title},d)),i&&i.partyResults[0].seats>0&&o.a.createElement("div",{className:t.barchart},o.a.createElement(p,{seatTotal:x,majority:25,majorityPercent:25/x*100,data:i})),o.a.createElement("div",{className:t.partyMap},S),i&&o.a.createElement("div",{className:t.update},"Last updated: ",w&&w.toString()))},j=window.screen.width<500;i.a.render(o.a.createElement(g,{small:j?"true":void 0}),document.getElementById("root"))},8:function(e,t,a){e.exports=a(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.649d8d6a.chunk.js.map