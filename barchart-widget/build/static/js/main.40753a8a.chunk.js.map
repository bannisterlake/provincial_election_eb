{"version":3,"sources":["components/Seat.js","components/Party.js","components/MajorityMeter.js","App.js","index.js"],"names":["styles","makeStyles","seat","props","height","minWidth","margin","backgroundColor","color","flexShrink","Seat","classes","key","party","el","className","partyContainer","width","display","alignItems","fontWeight","letterSpacing","padding","borderRadius","justifyItems","justifyContent","popVote","Party","name","seats","votes","useStyles","meter","marginLeft","position","minHeight","bar","background","animationName","animationDuration","majorityLine","bottom","borderLeft","majorityLabel","textAlign","marginTop","Bar","other","majority","seatTotal","style","left","majorityPercent","data","partyResults","map","i","console","log","main","flexDirection","titleRow","title","fontSize","small","barchart","flexWrap","partyMap","update","App","useState","setData","setTitle","timer","useEffect","fetch","then","res","text","json","catch","err","startTimer","getData","setInterval","ok","parties","date","j","push","nameShort","elected","votesPercent","length","seatsRemaining","k","Date","generated","MajorityMeter","toString","screenSize","window","screen","ReactDOM","render","undefined","document","getElementById"],"mappings":"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","file":"static/js/main.40753a8a.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst styles = makeStyles({\r\n    seat: props=> ({\r\n        height: 20, \r\n        minWidth: '4%',\r\n        margin: '0.2%',\r\n        backgroundColor:  props.color,\r\n        flexShrink: 1\r\n    })\r\n})\r\n\r\nconst Seat = (props) => {\r\n    \r\n    const classes = styles(props)\r\n    \r\n    return <div key={`${props.party}-${props.el}`} className={classes.seat}/>\r\n}\r\n\r\nexport default Seat;","import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst styles = makeStyles({\r\n    partyContainer: {\r\n        width: '20%',\r\n\r\n    },\r\n    party: props=> ({\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        fontWeight: 'bold',\r\n        letterSpacing: 2,\r\n        padding: '5px 5px',\r\n        margin: 1,\r\n        borderRadius: 5,\r\n        color: 'white',\r\n        justifyItems: 'center',\r\n        justifyContent: 'space-between',\r\n        backgroundColor: props.color \r\n    }),\r\n    popVote: {\r\n        padding: 5,\r\n        fontWeight: 'bold'\r\n    }\r\n})\r\n\r\nconst Party = (props) => {\r\n    \r\n    const classes = styles(props)\r\n    \r\n    return (\r\n        <div className={classes.partyContainer}>\r\n            <div className={classes.party}>\r\n                <div>{props.name}</div>\r\n                <div>{props.seats}</div>\r\n            </div>\r\n            <div className={classes.popVote}>\r\n                Pop vote: {props.votes}%\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Party;","import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\n// import {CSSTransition} from 'react-transition-group'\r\n\r\nconst useStyles = makeStyles({\r\n    meter: {\r\n        width: '100%',\r\n        marginLeft: 10,\r\n        position: 'relative',\r\n        minHeight: '20px',\r\n\r\n    },\r\n    bar: {\r\n      background: (props) =>\r\n        props.color, \r\n      width: (props) => props.votes,\r\n      borderRadius: '0px 5px 5px 0px',\r\n      height: 10,\r\n      margin: 2,\r\n      animationName: 'animate-bar',\r\n      animationDuration: '0.5s'\r\n    },\r\n    majorityLine: {\r\n        position: 'absolute',\r\n        height: '120%',\r\n        minHeight: '20px',\r\n        bottom: -2,\r\n        borderLeft: '2px solid black',\r\n    },\r\n    majorityLabel: {\r\n        position: 'absolute',\r\n        textAlign: 'left',\r\n        marginTop: -25,\r\n        marginLeft: -7,\r\n        fontWeight: 'bolder'\r\n    }\r\n  });\r\n  \r\n\r\nfunction Bar(props) {\r\n    // const [width, setWidth] = useState(0)\r\n    const { color, votes, ...other } = props;\r\n    const classes = useStyles(props);\r\n    return <div className={`animate-bar ${classes.bar}`} {...other} />;\r\n}\r\n\r\nfunction Line(props) {\r\n    const { color, majority, ...other } = props;\r\n    const classes = useStyles(props);\r\n    return <div className={classes.majorityLine} {...other} />;\r\n}\r\n\r\nconst Seat = (props) => {\r\n    \r\n    // const { color, ...other } = props;\r\n\r\n    const classes = useStyles(props)\r\n    \r\n    var lead = 61\r\n\r\n    var majority = (props.majority/props.seatTotal)*100\r\n\r\n    return (\r\n        <div className={classes.meter}>\r\n            <div className={classes.majorityLabel} style={{left: `${props.majorityPercent}%`}}>{props.majority} seats needed for majority</div>\r\n            {props.data && props.data.partyResults.map((party, i)=>{\r\n                if (i === 0) {\r\n                    lead = party.seats\r\n                    majority = `${party.seats/props.seatTotal*100}%`\r\n                }\r\n                if (i < 3 && party.seats > 0) {\r\n                    return <Bar color={party.color} votes={`${(party.seats/props.seatTotal)*100}%`} />\r\n                }\r\n            })    \r\n            }\r\n            {console.log('majority',majority)}\r\n            <div className={classes.majorityLine} style={{left: `${props.majorityPercent}%`}}/>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Seat;","import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport {makeStyles} from '@material-ui/core/styles';\r\n\r\n//Components\r\nimport Seat from './components/Seat'\r\nimport Party from './components/Party'\r\nimport MajorityMeter from './components/MajorityMeter'\r\n\r\nconst styles = makeStyles({\r\n\tmain: {\r\n\t\t// fontFamily: 'Roboto',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\tflexDirection: 'column',\r\n\t\tpadding: '20px 30px',\r\n\t\tbackgroundColor: '#f2f2f2'\r\n\t},\r\n\ttitleRow: {\r\n\t\tdisplay: 'flex', \r\n\t\tpadding: '0px 5px 5px 5px',\r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: props => props.small ? 20: 26,\r\n\t\tfontWeight: 'bold'\r\n\t},\r\n\tbarchart: {\r\n\t\tfontSize: props=> props.small ? 11 : 14,\r\n\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: '30px 0',\r\n\t\tflexDirection: 'column-reverse',\r\n\t\tflexWrap: 'wrap',\r\n\t},\r\n\tpartyMap: {\r\n\t\tfontSize: props=>props.small ? 14 : 18,\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'space-evenly'\r\n\t},\r\n\tupdate: {\r\n\t\tpadding: '15px 5px',\r\n\t\tfontSize: props=>props.small ? 12 : 14\r\n\t}\r\n})\r\n\r\nconst App = (props) => {\r\n\r\n\tconst classes = styles(props);\r\n\tconst [data, setData] = useState(null)\r\n\tconst [title, setTitle] = useState('')\r\n\tconst [timer, setTimer] = useState(100000)\r\n\tconst [seatTotal, setSeatTotal] = useState(49)\r\n\r\n\tuseEffect(()=>{\r\n\t\tconsole.log(`Updating every ${timer/1000} seconds`)\r\n\t\tfetch('/title')\r\n\t\t\t.then(res=>res.text())\r\n\t\t\t.then(json=>setTitle(json))\r\n\t\t\t.catch(err=>console.log(\"error setting title\"))\r\n\t\tstartTimer();\r\n\t\tgetData();\r\n\t},[])\r\n\t\r\n\tconst startTimer = () => {\r\n\t\tsetInterval(()=>{\r\n\t\t\tgetData();\r\n\t\t}, timer);\r\n\t}\r\n\t\r\n\r\n\tconst getData = () => {\r\n\t\tconsole.log('fetching')\r\n\t\tfetch(`/overallresults`)\r\n\t\t\t.then(res=>{\r\n\t\t\t\tif (res.ok) {\r\n\t\t\t\t\treturn res.json();\r\n\t\t\t\t} \r\n\t\t\t})\r\n\t\t\t.then(json=>\r\n\t\t\t\tsetData(json)\r\n\t\t\t)\r\n\t\t\t.catch(err=>{\r\n\t\t\t\tconsole.log(\"Error fetching results\")\r\n\t\t\t})\r\n\r\n\t}\r\n\r\n\tconst seats = [];\r\n\r\n\tconst parties = [];\r\n\r\n\tvar date = ''\r\n\r\n\tif (data) {\r\n\t\tdata.partyResults.map((party, i)=>{\r\n\t\t\tfor (let j=0; j < party.seats; j ++) {\r\n\t\t\t\tseats.push(<Seat key={`${party.nameShort}-${j}`} color={party.color} />)\r\n\t\t\t}\r\n\t\t\tparties.push(<Party key={`${party}-${i}`} name={party.nameShort} seats={party.elected} votes={party.votesPercent} color={party.color} />)\r\n\t\t})\r\n\t\tif (seats.length < (seatTotal+1)) {\r\n\t\t\tlet seatsRemaining = seatTotal-seats.length\r\n\t\t\tfor (let k=0; k < seatsRemaining; k++) {\r\n\t\t\t\tseats.push(<Seat key={`none-${k}`} color={'#cccccc'}/>)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdate = new Date(data.generated)\r\n\r\n\t} else {\r\n\t\tfor (let i = 0; i < seatTotal; i++) {\r\n\t\t\tseats.push(<Seat key={`none-${i}`} color={'#cccccc'} />)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div className={classes.main}>\r\n\t\t\t<div className={classes.titleRow}>\r\n\t\t\t\t<div className={classes.title}>{title}</div>\r\n\t\t\t</div>\r\n\t\t\t{(data && data.partyResults[0].seats > 0 ) && <div className={classes.barchart}>\r\n\t\t\t\t<MajorityMeter seatTotal={seatTotal} majority={25} majorityPercent={(25/seatTotal)*100} data={data}/>\r\n\t\t\t</div>}\r\n\t\t\t<div className={classes.partyMap}>\r\n\t\t\t\t{parties}\r\n\t\t\t</div>\r\n\t\t\t{/* <div className={classes.declaration}>Declaration</div> */}\r\n\t\t\t{data && <div className={classes.update}>Last updated: {date && date.toString()}</div>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App.js\";\r\n\r\nlet screenSize= window.screen.width < 500;\r\n\r\nReactDOM.render(<App small={screenSize ? 'true' : undefined}/>, document.getElementById(\"root\"));"],"sourceRoot":""}