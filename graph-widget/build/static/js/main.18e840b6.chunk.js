(this["webpackJsonpvizzion-client"]=this["webpackJsonpvizzion-client"]||[]).push([[0],{261:function(e,t,a){e.exports=a(596)},266:function(e,t,a){},267:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},268:function(e,t,a){},596:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(246),i=a.n(o),l=(a(266),a(42)),c=(a(267),a(268),a(165)),s=a.n(c),u=(a(285),a(612)),d=a(615),m=Object(u.a)({partyContainer:function(e){return{backgroundColor:e.party.color,padding:5,maxHeight:40,margin:3,borderRadius:5,color:"white",fontWeight:"bold",letterSpacing:1,display:"flex",justifyContent:"space-between"}}}),f=function(e){var t=m(e);return r.a.createElement("div",{className:t.partyContainer},r.a.createElement("div",null,e.party.nameShort),r.a.createElement("div",null,e.result>0&&"+",e.result))},g=a(72),p=Object(u.a)({partyContainer:function(e){var t;return t={alignItems:"center",height:25,margin:3,position:"relative",width:"80%",color:"black",fontWeight:"bold",letterSpacing:1,display:"flex"},Object(g.a)(t,"position","relative"),Object(g.a)(t,"justifyContent","space-between"),Object(g.a)(t,"borderBottom","1px solid black"),Object(g.a)(t,"& #minus",{position:"absolute",left:-15}),Object(g.a)(t,"& #plus",{position:"absolute",right:-15}),t},gainsBar:{backgroundColor:function(e){return e.color},position:"absolute",bottom:0,right:function(e){return e.width<=0&&"50%"},left:function(e){return e.width>0&&"50%"},height:"60%",borderWidth:"1px",borderStyle:"solid",borderColor:function(e){return e.color},margin:0,padding:0,transition:"width 300ms ease-in-out",transitionDelay:"100ms"}}),h=function(e){var t=p(e),a=Object(n.useState)(0),o=Object(l.a)(a,2),i=o[0],c=o[1];return Object(n.useEffect)((function(){c(e.width)}),[e]),r.a.createElement("div",{className:t.partyContainer},r.a.createElement("div",{id:"minus"},"-"),r.a.createElement("div",{style:{width:"".concat(Math.abs(i),"%")},className:t.gainsBar}),r.a.createElement("div",{id:"plus"},"+"))},v=Object(u.a)({gainsDiv:{flex:5,display:"flex",flexDirection:"column",alignItems:"center",position:"relative",justifyContent:"center"},centerBar:{position:"absolute",borderLeft:"1px solid black",left:"50%",height:"97%",zIndex:20}}),b=function(e){var t=Object(n.useState)(0),a=Object(l.a)(t,2),o=a[0],i=a[1],c=v(e);return Object(n.useEffect)((function(){var t=0;e.data&&(e.data.partyResults.forEach((function(e){console.log("party",e.seatChange,t),Math.abs(e.seatChange)>t&&(t=Math.abs(e.seatChange))})),i(t))}),[e.data]),r.a.createElement("div",{className:c.gainsDiv},r.a.createElement("div",{className:c.centerBar}),e.data&&e.data.partyResults.map((function(e,t){var a=0;return 0!==o&&(a=e.seatChange/(o+1)*100),r.a.createElement(h,{key:t,color:e.color,width:"".concat(a/2)})})))},y=a(248),E=a.n(y),x=Object(u.a)({root:{display:"flex",alignItems:"center",paddingBottom:15,fontWeight:"bolder",alignSelf:"flex-start",fontSize:14,paddingLeft:5,"& svg":{color:"green",fontSize:20,paddingRight:5}}}),j=function(e){var t=x();return r.a.createElement("div",{className:e.declarationText&&t.root},r.a.createElement(E.a,{color:"green"}),e.declarationText)};a(493);var O=Object(u.a)({main:{fontSize:function(e){return e.small&&12},display:"flex",position:"relative",flexDirection:"column",padding:"10px 20px",backgroundColor:"#ededf0",alignContent:"center"},content:{display:"flex",flexDirection:function(e){return e.small?"column":"row"},paddingBottom:"15px"},left:{flex:3,maxHeight:250,alignItems:"center"},right:{flex:4,maxHeight:250},title:{fontWeight:"bold",marginLeft:5,fontSize:function(e){return e.small?16:18}},border:{borderRight:"1px solid grey",marginRight:10},chartHolder:{display:"flex",flexDirection:"row",height:"100%",alignItems:"center"},partyBars:{flex:3,alignSelf:"center"},chartDiv:{flex:function(e){return e.small?3:2}}});var w=function(e){var t=Object(n.useState)(null),a=Object(l.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(!0),u=Object(l.a)(c,2),m=u[0],g=u[1],p=Object(n.useState)(3e4),h=Object(l.a)(p,2),v=h[0],y=(h[1],Object(n.useState)("")),E=Object(l.a)(y,2),x=E[0],w=E[1],N=Object(n.useState)(null),S=Object(l.a)(N,2),C=S[0],k=S[1],R=O(e);Object(n.useEffect)((function(){console.log("Updating every ".concat(v/1e3," seconds")),D(),B()}),[]),Object(n.useEffect)((function(){console.log("check declaration",o,C);try{if(o&&C)if(C.overallResult.partyName&&C.overallResult.resultText){var e=C.overallResult.partyName+" "+C.overallResult.resultText;console.log(e),w(e)}else w("")}catch(t){}}),[C]);var B=function(){setInterval((function(){console.log("updating"),D()}),v)},D=function(){console.log("fetching"),s.a.get("/overallresults").then((function(e){200===e.status&&(i(e.data),g(!1))})).catch((function(e){console.log("Error fetching election results")})),s.a.get("/declaration").then((function(e){console.log(e.data),200===e.status&&k(e.data)})).catch((function(e){console.log("Error fetching results")}))};return r.a.createElement("div",{id:"graphWidget-main",className:R.main},!m&&r.a.createElement(r.a.Fragment,null,x&&r.a.createElement(j,{declarationText:x}),r.a.createElement("div",{className:R.content},r.a.createElement("div",{className:R.left},r.a.createElement("div",{className:R.title},"Popular vote"),r.a.createElement("div",{className:R.chartHolder},r.a.createElement("div",{className:R.partyBars},o&&o.partyResults.map((function(e,t){return r.a.createElement(f,{key:t,party:e,result:"".concat(e.votesPercent,"%")})}))),r.a.createElement("div",{className:R.chartDiv},o&&r.a.createElement(d.a,{id:"widgetPie",padding:50,padAngle:function(e){return e.datum.y},innerRadius:130,data:o.partyResults,x:"nameShort",y:"votesPercent",labels:function(e){e.datum;return""},style:{data:{fill:function(e){return e.datum.color}}}})))),r.a.createElement("div",{className:R.border}),r.a.createElement("div",{className:R.right},r.a.createElement("div",{className:R.title},"Gains/Losses"),r.a.createElement("div",{className:R.chartHolder},r.a.createElement("div",{className:R.partyBars},o&&o.partyResults.map((function(e,t){return r.a.createElement(f,{key:t,party:e,result:"".concat(e.seatChange)})}))),r.a.createElement(b,{data:o})))),r.a.createElement("div",null,r.a.createElement("div",{className:R.update},"Last updated: ",Date(o.generated)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=window.innerWidth<500;i.a.render(r.a.createElement(w,{small:N?"true":void 0}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[261,1,2]]]);
//# sourceMappingURL=main.18e840b6.chunk.js.map