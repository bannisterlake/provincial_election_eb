(this["webpackJsonpvizzion-client"]=this["webpackJsonpvizzion-client"]||[]).push([[0],{69:function(e,t,n){e.exports=n(86)},74:function(e,t,n){},75:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(22),c=n.n(r),i=(n(74),n(12)),l=(n(75),n(101)),s=(n(47),n(43),Object(l.a)({map:{display:"flex",height:"100%",flex:3}}),n(52)),u=n(55),f=n(51),p=n(53),d=n(54),m=n(61),b=n.n(m),h=n(3),g=n.n(h),j=n(62),O=n.n(j),v=Object(l.a)({mapContainer:{flex:3,position:"relative"},resetButton:{display:"flex",boxShadow:"0 1px 4px rgba(0,0,0,0.65)",height:26,width:26,fontSize:14,alignItems:"center",justifyContent:"center",borderRadius:"4px",background:"#FFFFFF",cursor:"pointer",color:"black"}}),E=function(e){var t=Object(a.useState)({lat:54,lng:-105,zoom:5}),n=Object(i.a)(t,2),r=n[0],c=(n[1],Object(a.useState)()),l=Object(i.a)(c,2),m=l[0],h=l[1],j=Object(a.useState)(null),E=Object(i.a)(j,2),y=E[0],S=E[1],w=Object(a.useRef)(null),x=Object(a.useRef)(null),C=v();Object(a.useEffect)((function(){w&&(console.log("here"),fetch("/SASK_Constituency_boundary.json").then((function(e){return e.json()})).then((function(e){S(e);var t=g.a.geoJSON(e).getBounds();h(t),w.current.leafletElement.fitBounds(t),console.log(g.a.geoJSON(e))})))}),[]),Object(a.useEffect)((function(){B()}),[e.data]);var B=function(t){if(t){var n=function(t){if(e.data)return e.data.data.find((function(e){return e.name.toUpperCase()===t.toUpperCase()}))}(t.properties.Constituen),a="lightgrey";return n&&(a=function(t){if(e.parties){var n=e.parties.data.find((function(e){if(t.results[0].votes>0)return e.nameShort===t.results[0].partyCode}));return n?n.colour:"lightgrey"}}(n)),{fillColor:a,weight:.9,color:"black",fillOpacity:.8}}};return o.a.createElement("div",{className:C.mapContainer},o.a.createElement(s.a,{ref:w,maxBounds:[[29.305561325527698,-130.53515625000003],[74.16408546675687,-90.54296875000001]],minZoom:5},o.a.createElement(u.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png"}),y&&o.a.createElement(f.a,{ref:x,style:B,data:y,onClick:function(e){e.target.getBounds();var t=e.layer.getBounds();w.current.leafletElement.fitBounds(t)}}),o.a.createElement(p.a,{position:r},o.a.createElement(d.a,null,"A pretty CSS3 popup. ",o.a.createElement("br",null)," Easily customizable.")),o.a.createElement(b.a,{position:"topleft"},o.a.createElement("a",{className:"leaflet-control-zoom ".concat(C.resetButton),onClick:function(){w.current.leafletElement.fitBounds(m)}},o.a.createElement(O.a,null)))))},y=n(63),S=n.n(y),w=Object(l.a)({sidebar:{flex:1,position:"relative",overflow:"auto"},title:{position:"sticky",top:0,backgroundColor:"darkgrey",color:"white",display:"flex",alignItems:"center",height:50,paddingLeft:10},locationButtonContainer:{},LocationButton:{display:"flex",alignItems:"center",height:50,paddingLeft:10,justifyContent:"space-between","&:hover":{backgroundColor:"lightgrey",cursor:"pointer"}}}),x=function(e){var t=Object(a.useState)("Select a province or territory"),n=Object(i.a)(t,2),r=n[0],c=(n[1],Object(a.useState)(!1)),l=Object(i.a)(c,2),s=l[0],u=(l[1],w()),f=function(e){return o.a.createElement("div",{className:u.LocationButton},e.children)};return o.a.createElement("div",{className:u.sidebar},o.a.createElement("div",{className:u.title},r),e.data&&e.data.data.map((function(e){return console.log(e),o.a.createElement(f,null,e.name,s&&o.a.createElement(S.a,null))})))},C=Object(l.a)({app:{height:"100%",display:"flex",flexDirection:"row"}});var B=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!0),l=Object(i.a)(c,2),s=(l[0],l[1]),u=Object(a.useState)(null),f=Object(i.a)(u,2),p=f[0],d=f[1],m=C();Object(a.useEffect)((function(){return b()}),[]);var b=function(){fetch("/data/SASK_2016.json").then((function(e){return e.json()})).then((function(e){r(e),s(!1)})),fetch("/data/partylist.json").then((function(e){return e.json()})).then((function(e){d(e)}))};return o.a.createElement("div",{id:"map-widget-app",className:m.app},o.a.createElement(E,{data:n,parties:p}),o.a.createElement(x,{data:n}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[69,1,2]]]);
//# sourceMappingURL=main.f1bc51a9.chunk.js.map