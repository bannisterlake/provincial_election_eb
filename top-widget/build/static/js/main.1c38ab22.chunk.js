(this["webpackJsonpvizzion-client"]=this["webpackJsonpvizzion-client"]||[]).push([[0],{149:function(e,t,a){e.exports=a(377)},154:function(e,t,a){},377:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(148),l=a.n(r),c=a(50),i=(a(154),a(387)),s=a(99),m=a.n(s),u=(a(171),Object(i.a)({seat:{height:function(e){return e.small?10:15},minWidth:"4%",margin:"0.1%",backgroundColor:function(e){return e.color},flexShrink:1,fontSize:function(e){return e.small?14:16}}})),d=function(e){var t=u(e);return o.a.createElement("div",{key:"".concat(e.party,"-").concat(e.el),className:t.seat})},p=Object(i.a)({partyContainer:{width:"20%"},party:function(e){return{display:"flex",alignItems:"center",fontWeight:"bold",fontSize:e.small?8:14,letterSpacing:2,padding:"5px 5px",margin:1,borderRadius:5,color:"white",justifyItems:"center",justifyContent:"space-between",backgroundColor:e.color}},popVote:function(e){return{padding:5,fontWeight:"bold",fontSize:e.small?8:14}}}),f=function(e){var t=p(e);return o.a.createElement("div",{className:t.partyContainer},o.a.createElement("div",{className:t.party},o.a.createElement("div",null,e.name),o.a.createElement("div",null,e.seats)),o.a.createElement("div",{className:t.popVote},"Pop vote: ",e.votes,"%"))},g=a(100),v=Object(i.a)({meter:function(e){return{width:e.small?70:"150px",marginLeft:10,position:"relative"}},bar:{background:function(e){return e.color},width:function(e){return e.votes},borderRadius:"0px 5px 5px 0px",height:5,margin:1},majorityLine:{position:"absolute",height:"120%",bottom:-2,borderLeft:function(e){return e.small?"1px solid black":"2px solid black"}},majorityLabel:function(e){return{position:"absolute",textAlign:"center",marginTop:e.small?-14:-18,marginLeft:e.small?-3:-4,fontSize:e.small?8:10,fontWeight:"bolder"}}});function y(e){e.color,e.votes;var t=Object(g.a)(e,["color","votes"]),a=v(e);return o.a.createElement("div",Object.assign({className:a.bar},t))}var b=function(e){var t=v(e),a=e.majority/e.seatTotal*100;return o.a.createElement("div",{className:t.meter},o.a.createElement("div",{className:t.majorityLabel,style:{left:"".concat(e.majorityPercent,"%")}},e.majority),e.data&&e.data.partyResults.map((function(t,n){if(0===n&&(t.seats,a="".concat(t.seats/e.seatTotal*100,"%")),n<3&&t.seats>0)return o.a.createElement(y,{color:t.color,votes:"".concat(t.seats/e.seatTotal*100,"%")})})),console.log("majority",a),o.a.createElement("div",{className:t.majorityLine,style:{left:"".concat(e.majorityPercent,"%")}}))};a(375);var h=Object(i.a)({main:{display:"flex",position:"relative",flexDirection:"column",padding:"20px 10px",backgroundColor:"#ededf0"},titleRow:{display:"flex",padding:"0px 5px",justifyContent:"space-between"},title:function(e){return{fontSize:e.small?12:18,fontWeight:"bold",paddingRight:20}},majorityMeter:function(e){return{display:"flex",alignItems:"center",textAlign:"right",fontSize:e.small?8:10}},seatMap:{display:"flex",height:90,maxHeight:function(e){return e.small?50:100},padding:"10px 0",flexDirection:"column-reverse",flexWrap:"wrap"},partyMap:{display:"flex",justifyContent:"space-evenly"},update:function(e){return{padding:"15px 5px",fontSize:e.small?8:12}}}),j=function(e){var t=h(e),a=Object(n.useState)(null),r=Object(c.a)(a,2),l=r[0],i=r[1],s=Object(n.useState)(""),u=Object(c.a)(s,2),p=u[0],g=u[1],v=Object(n.useState)(3e4),y=Object(c.a)(v,2),j=y[0],x=(y[1],Object(n.useState)(49)),E=Object(c.a)(x,2),O=E[0],S=(E[1],Object(n.useState)(25)),w=Object(c.a)(S,2),N=w[0];w[1];Object(n.useEffect)((function(){console.log("Updating every ".concat(j/1e3," seconds")),m.a.get("/title").then((function(e){200===e.status&&g(e.data)})).catch((function(e){return console.log("error setting title")})),k(),z()}),[]);var k=function(){setInterval((function(){z()}),j)},z=function(){m.a.get("/overallresults").then((function(e){200===e.status&&i(e.data)})).catch((function(e){return console.log("Error fetching overall results")}))},C=[],L=[],R="";if(l){if(l.partyResults.map((function(t){for(var a=0;a<t.seats;a++)C.push(o.a.createElement(d,{key:"".concat(t.nameShort,"-").concat(a),color:t.color,small:e.small}));t.seats>0&&L.push(o.a.createElement(f,{key:t.id,name:t.nameShort,seats:t.seats,votes:t.votesPercent,color:t.color,small:e.small}))})),C.length<O+1){console.log(C.length);for(var M=O-C.length,W=0;W<M;W++)C.push(o.a.createElement(d,{small:e.small,key:"none-".concat(W),color:"#cccccc"}))}R=new Date(l.generated)}else for(var I=0;I<O;I++)C.push(o.a.createElement(d,{key:"none-".concat(I),small:e.small,color:"#cccccc"}));return o.a.createElement("div",{className:t.main},o.a.createElement("div",{className:t.titleRow},o.a.createElement("div",{className:t.title},p),l&&l.partyResults[0].votes>0&&o.a.createElement("div",{className:t.majorityMeter},N," seats needed for majority ",o.a.createElement(b,{seatTotal:O,majority:N,majorityPercent:N/O*100,small:e.small,data:l}))),o.a.createElement("div",{className:t.seatMap},C),o.a.createElement("div",{className:t.partyMap},L),l&&o.a.createElement("div",{className:t.update},"Last updated: ",R&&R.toString()))},x=window.screen.width<500;l.a.render(o.a.createElement(j,{small:x?"true":void 0}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.1c38ab22.chunk.js.map