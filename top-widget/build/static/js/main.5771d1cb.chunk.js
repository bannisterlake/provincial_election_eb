(this["webpackJsonpvizzion-client"]=this["webpackJsonpvizzion-client"]||[]).push([[0],{13:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),l=a.n(o),c=a(2),i=(a(13),a(26)),s=Object(i.a)({seat:{height:function(e){return e.small?10:15},minWidth:"4%",margin:"0.1%",backgroundColor:function(e){return e.color},flexShrink:1,fontSize:function(e){return e.small?14:16}}}),m=function(e){var t=s(e);return r.a.createElement("div",{key:"".concat(e.party,"-").concat(e.el),className:t.seat})},u=Object(i.a)({partyContainer:{width:"20%"},party:function(e){return{display:"flex",alignItems:"center",fontWeight:"bold",fontSize:e.small?8:14,letterSpacing:2,padding:"5px 5px",margin:1,borderRadius:5,color:"white",justifyItems:"center",justifyContent:"space-between",backgroundColor:e.color}},popVote:function(e){return{padding:5,fontWeight:"bold",fontSize:e.small?8:14}}}),d=function(e){var t=u(e);return r.a.createElement("div",{className:t.partyContainer},r.a.createElement("div",{className:t.party},r.a.createElement("div",null,e.name),r.a.createElement("div",null,e.seats)),r.a.createElement("div",{className:t.popVote},"Pop vote: ",e.votes,"%"))},f=a(4),p=Object(i.a)({meter:function(e){return{width:e.small?70:"150px",marginLeft:10,position:"relative"}},bar:{background:function(e){return e.color},width:function(e){return e.votes},borderRadius:"0px 5px 5px 0px",height:6,margin:1},majorityLine:{position:"absolute",height:20,bottom:-2,right:function(e){return e.majority},borderLeft:function(e){return e.small?"1px solid black":"2px solid black"}},majorityLabel:function(e){return{position:"absolute",textAlign:"center",marginTop:e.small?-14:-18,marginRight:e.small?-3:-4,fontSize:e.small?8:10,fontWeight:"bolder"}}});function v(e){e.color,e.votes;var t=Object(f.a)(e,["color","votes"]),a=p(e);return r.a.createElement("div",Object.assign({className:a.bar},t))}function g(e){e.color,e.majority;var t=Object(f.a)(e,["color","majority"]),a=p(e);return r.a.createElement("div",Object.assign({className:a.majorityLine},t))}var h=function(e){var t=Object(n.useState)(31/61*100),a=Object(c.a)(t,2),o=a[0],l=(a[1],p(e));return r.a.createElement("div",{className:l.meter},r.a.createElement("div",{className:l.majorityLabel,style:{right:"".concat(o,"%")}},"31"),e.data&&e.data.partyResults.map((function(e,t){return 0===t||t<3&&e.seats>0?r.a.createElement(v,{key:t,color:e.color,votes:"".concat(e.seats/61*100,"%")}):void 0})),r.a.createElement(g,{small:e.small,color:"red",majority:"".concat(o,"%")}))},y=Object(i.a)({main:{display:"flex",position:"relative",flexDirection:"column",padding:"20px 10px",backgroundColor:"#f2f2f2"},titleRow:{display:"flex",padding:"0px 5px",justifyContent:"space-between"},title:function(e){return{fontSize:e.small?14:18,fontWeight:"bold"}},majorityMeter:function(e){return{display:"flex",alignItems:"flex-end",textAlign:"right",fontSize:e.small?8:10}},seatMap:{display:"flex",height:90,maxHeight:function(e){return e.small?50:100},padding:"10px 0",flexDirection:"column-reverse",flexWrap:"wrap"},partyMap:{display:"flex",justifyContent:"space-evenly"},update:function(e){return{padding:"15px 5px",fontSize:e.small?8:12}}}),b=function(e){var t=y(e),a=Object(n.useState)(null),o=Object(c.a)(a,2),l=o[0],i=o[1];Object(n.useEffect)((function(){s(),u()}),[]);var s=function(){var e=30;setInterval((function(){--e<=0&&(console.log("updating"),u(),e=30)}),1e3)},u=function(){fetch("/overallresults").then((function(e){if(e.ok)return e.json()})).then((function(e){return i(e)})).catch((function(e){return console.log("Error fetching overall results")}))},f=[],p=[],v="";if(l){if(l.partyResults.map((function(t){for(var a=0;a<t.seats;a++)f.push(r.a.createElement(m,{key:"".concat(t.nameShort,"-").concat(a),color:t.color,small:e.small}));p.push(r.a.createElement(d,{key:t.id,name:t.nameShort,seats:t.elected,votes:t.votesPercent,color:t.color,small:e.small}))})),f.length<62){console.log(f.length);for(var g=61-f.length,b=0;b<g;b++)f.push(r.a.createElement(m,{small:e.small,key:"none-".concat(b),color:"#cccccc"}))}v=new Date(l.generated)}else for(var x=0;x<61;x++)f.push(r.a.createElement(m,{key:"none-".concat(x),small:e.small,color:"#cccccc"}));return r.a.createElement("div",{className:t.main},r.a.createElement("div",{className:t.titleRow},r.a.createElement("div",{className:t.title},"Saskatchewan Election 2020"),r.a.createElement("div",{className:t.majorityMeter},"31 seats needed for majority ",r.a.createElement(h,{small:e.small,data:l}))),r.a.createElement("div",{className:t.seatMap},f),r.a.createElement("div",{className:t.partyMap},p),l&&r.a.createElement("div",{className:t.update},"Last updated: ",v&&v.toString()))},x=window.screen.width<500;l.a.render(r.a.createElement(b,{small:x?"true":void 0}),document.getElementById("root"))},8:function(e,t,a){e.exports=a(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.5771d1cb.chunk.js.map