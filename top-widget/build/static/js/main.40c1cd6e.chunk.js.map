{"version":3,"sources":["components/Seat.js","components/Party.js","components/MajorityMeter.js","App.js","index.js"],"names":["styles","makeStyles","seat","height","props","small","minWidth","margin","backgroundColor","color","flexShrink","fontSize","Seat","classes","key","party","el","className","partyContainer","width","display","alignItems","fontWeight","letterSpacing","padding","borderRadius","justifyItems","justifyContent","popVote","Party","name","seats","votes","useStyles","meter","marginLeft","position","bar","background","majorityLine","bottom","borderLeft","majorityLabel","textAlign","marginTop","Bar","other","MajorityMeter","majority","seatTotal","style","left","majorityPercent","data","partyResults","map","i","console","log","main","flexDirection","titleRow","title","paddingRight","majorityMeter","seatMap","maxHeight","flexWrap","partyMap","update","App","useState","setData","setTitle","timer","useEffect","fetch","then","res","text","json","catch","err","startTimer","getData","setInterval","ok","parties","date","j","push","nameShort","id","votesPercent","length","seatsRemaining","k","Date","generated","toString","screenSize","window","screen","ReactDOM","render","undefined","document","getElementById"],"mappings":"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","file":"static/js/main.40c1cd6e.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\n\r\nconst styles = makeStyles({\r\n    seat: {\r\n        height: (props)=>props.small ? 10: 15, \r\n        minWidth: '4%',\r\n        margin: '0.1%',\r\n        backgroundColor:  (props)=>props.color,\r\n        flexShrink: 1,\r\n        fontSize: (props)=>props.small ? 14 : 16\r\n    }\r\n})\r\n\r\nconst Seat = (props) => {\r\n    \r\n    const classes = styles(props)\r\n    \r\n    return <div key={`${props.party}-${props.el}`} className={classes.seat}/>\r\n}\r\n\r\nexport default Seat;","import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst styles = makeStyles({\r\n    partyContainer: {\r\n        width: '20%',\r\n\r\n    },\r\n    party: props=> ({\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        fontWeight: 'bold',\r\n        fontSize: props.small ? 8: 14,\r\n        letterSpacing: 2,\r\n        padding: '5px 5px',\r\n        margin: 1,\r\n        borderRadius: 5,\r\n        color: 'white',\r\n        justifyItems: 'center',\r\n        justifyContent: 'space-between',\r\n        backgroundColor: props.color \r\n    }),\r\n    popVote: props=>({\r\n        padding: 5,\r\n        fontWeight: 'bold',\r\n        fontSize: props.small ? 8: 14\r\n    })\r\n})\r\n\r\nconst Party = (props) => {\r\n    \r\n    const classes = styles(props)\r\n    \r\n    return (\r\n        <div className={classes.partyContainer}>\r\n            <div className={classes.party}>\r\n                <div>{props.name}</div>\r\n                <div>{props.seats}</div>\r\n            </div>\r\n            <div className={classes.popVote}>\r\n                Pop vote: {props.votes}%\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Party;","import React, {useState} from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles({\r\n    meter: props =>({\r\n        width: props.small ? 70 : '150px',\r\n        marginLeft: 10,\r\n        position: 'relative'\r\n    }),\r\n    bar: {\r\n      background: (props) =>\r\n        props.color, \r\n      width: (props) => props.votes,\r\n      borderRadius: '0px 5px 5px 0px',\r\n      height: 6,\r\n      margin: 1,\r\n    },\r\n    majorityLine: {\r\n        position: 'absolute',\r\n        height: '120%',\r\n        bottom: -2,\r\n        borderLeft: (props)=> props.small ? '1px solid black' : '2px solid black',\r\n    },\r\n    majorityLabel: props=>({\r\n        position: 'absolute',\r\n        // right: '50%',\r\n        textAlign: 'center',\r\n        marginTop: props.small ? -14 : -18,\r\n        marginLeft: props.small ?  -3 : -4,\r\n        fontSize: props.small ? 8: 10,\r\n        fontWeight: 'bolder'\r\n    })\r\n\r\n\r\n  });\r\n  \r\n\r\nfunction Bar(props) {\r\n    const { color, votes, ...other } = props;\r\n    const classes = useStyles(props);\r\n    return <div className={classes.bar} {...other} />;\r\n}\r\n\r\nfunction Line(props) {\r\n    const { color, majority, ...other } = props;\r\n    const classes = useStyles(props);\r\n    return <div className={classes.majorityLine} {...other} />;\r\n}\r\n\r\nconst MajorityMeter = (props) => {\r\n    \r\n    // const { color, ...other } = props;\r\n\r\n    const classes = useStyles(props)\r\n    \r\n    var lead = 61\r\n\r\n    var majority = (props.majority/props.seatTotal)*100\r\n\r\n    return (\r\n        <div className={classes.meter}>\r\n            <div className={classes.majorityLabel} style={{left: `${props.majorityPercent}%`}}>{props.majority}</div>\r\n            {props.data && props.data.partyResults.map((party, i)=>{\r\n                if (i === 0) {\r\n                    lead = party.seats\r\n                    majority = `${party.seats/props.seatTotal*100}%`\r\n                }\r\n                if (i < 3 && party.seats > 0) {\r\n                    return <Bar color={party.color} votes={`${(party.seats/props.seatTotal)*100}%`} />\r\n                }\r\n            })    \r\n            }\r\n            {console.log('majority',majority)}\r\n            <div className={classes.majorityLine} style={{left: `${props.majorityPercent}%`}}/>\r\n\r\n        </div>\r\n    );\r\n}\r\nexport default MajorityMeter;","import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport {makeStyles} from '@material-ui/core/styles';\r\n\r\n//Components\r\nimport Seat from './components/Seat'\r\nimport Party from './components/Party'\r\nimport MajorityMeter from './components/MajorityMeter'\r\n\r\nconst styles = makeStyles({\r\n\tmain: {\r\n\t\t// fontFamily: 'Roboto',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\tflexDirection: 'column',\r\n\t\tpadding: '20px 10px',\r\n\t\tbackgroundColor: '#f2f2f2'\r\n\t},\r\n\ttitleRow: {\r\n\t\tdisplay: 'flex', \r\n\t\tpadding: '0px 5px',\r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\ttitle: props=> ({\r\n\t\tfontSize: props.small ? 14: 18,\r\n\t\tfontWeight: 'bold',\r\n\t\tpaddingRight: 20\r\n\t}),\r\n\tmajorityMeter: props => ({\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\ttextAlign: 'right',\r\n\t\tfontSize: props.small ? 8 : 10,\r\n\t}),\r\n\tseatMap: {\r\n\t\tdisplay: 'flex',\r\n\t\theight: 90,\r\n\t\tmaxHeight: props=>props.small ? 50 : 100,\r\n\t\tpadding: '10px 0',\r\n\t\tflexDirection: 'column-reverse',\r\n\t\tflexWrap: 'wrap',\r\n\t},\r\n\tpartyMap: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'space-evenly'\r\n\t},\r\n\tupdate: props=>({\r\n\t\tpadding: '15px 5px',\r\n\t\tfontSize: props.small ? 8 : 12\r\n\t})\r\n})\r\n\r\nconst App = (props) => {\r\n\r\n\tconst classes = styles(props);\r\n\r\n\tconst [data, setData] = useState(null)\r\n\tconst [title, setTitle] = useState('')\r\n\tconst [timer, setTimer] = useState(300000)\r\n\tconst [seatTotal, setSeatTotal] = useState(49)\r\n\tconst [majority, setMajority] = useState(25)\r\n\r\n \t// const small = windo w.screen.width < 500\r\n\r\n\tuseEffect(()=>{\r\n\t\tconsole.log(`Updating every ${timer/1000} seconds`)\r\n\t\tfetch('/title')\r\n\t\t\t.then(res=>res.text())\r\n\t\t\t.then(json=>setTitle(json))\r\n\t\t\t.catch(err=>console.log(\"error setting title\"))\r\n\t\tstartTimer();\r\n\t\tgetData();\r\n\t},[])\r\n\r\n\tconst startTimer = () => {\r\n\t\tsetInterval(()=>{\r\n\t\t\tgetData();\r\n\t\t}, timer);\r\n\t  }\r\n\t\r\n\r\n\tconst getData = () => {\r\n\r\n\t\tfetch(`/overallresults`)\r\n\t\t\t.then(res=>{\r\n\t\t\t\tif (res.ok) {\r\n\t\t\t\t\treturn res.json();\r\n\t\t\t\t} \r\n\t\t\t})\r\n\t\t\t.then(json=>\r\n\t\t\t\tsetData(json)\r\n\t\t\t)\r\n\t\t\t.catch(err=>console.log(\"Error fetching overall results\"))\r\n\t}\r\n\r\n\tconst seats = [];\r\n\r\n\tconst parties = [];\r\n\r\n\tvar date = ''\r\n\r\n\tif (data) {\r\n\t\tdata.partyResults.map(party=>{\r\n\t\t\tfor (let j=0; j < party.seats; j ++) {\r\n\t\t\t\tseats.push(<Seat key={`${party.nameShort}-${j}`} color={party.color} small={props.small} />)\r\n\t\t\t}\r\n\t\t\tif (party.seats> 0) {\r\n\t\t\t\tparties.push(<Party key={party.id} name={party.nameShort} seats={party.seats} votes={party.votesPercent} color={party.color} small={props.small} />)\r\n\t\t\t}\r\n\t\t})\r\n\t\tif (seats.length < seatTotal+1) {\r\n\t\t\tconsole.log(seats.length)\r\n\t\t\tlet seatsRemaining = seatTotal-seats.length\r\n\t\t\tfor (let k=0; k < seatsRemaining; k++) {\r\n\t\t\t\tseats.push(<Seat small={props.small} key={`none-${k}`} color={'#cccccc'}/>)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdate = new Date(data.generated)\r\n\r\n\t} else {\r\n\t\tfor (let i = 0; i < seatTotal; i++) {\r\n\t\t\tseats.push(<Seat key={`none-${i}`} small={props.small} color={'#cccccc'} />)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div className={classes.main}>\r\n\t\t\t<div className={classes.titleRow}>\r\n\t\t\t\t<div className={classes.title}>{title}</div>\r\n\t\t\t\t{(data && data.partyResults[0].votes > 0) && <div className={classes.majorityMeter}>{majority} seats needed for majority <MajorityMeter seatTotal={seatTotal} majority={majority} majorityPercent={(majority/seatTotal)*100} small={props.small} data={data}/></div>}\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.seatMap}>\r\n\t\t\t\t{seats}\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.partyMap}>\r\n\t\t\t\t{parties}\r\n\t\t\t</div>\r\n\t\t\t{/* <div className={classes.declaration}>Declaration</div> */}\r\n\t\t\t{data && <div className={classes.update}>Last updated: {date && date.toString()}</div>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App.js\";\r\n\r\nlet screenSize= window.screen.width < 500\r\nReactDOM.render(<App small={screenSize ? 'true' : undefined}/>, document.getElementById(\"root\"));"],"sourceRoot":""}