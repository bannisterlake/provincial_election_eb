{"version":3,"sources":["components/Seat.js","components/Party.js","components/MajorityMeter.js","App.js","index.js"],"names":["styles","makeStyles","seat","props","height","minWidth","margin","backgroundColor","color","flexShrink","Seat","classes","key","party","el","className","partyContainer","width","display","alignItems","fontWeight","fontSize","letterSpacing","padding","borderRadius","justifyItems","justifyContent","popVote","Party","name","seats","votes","useStyles","meter","marginLeft","position","bar","background","majorityLine","bottom","left","majority","borderLeft","majorityLabel","textAlign","marginTop","marginRight","Bar","other","Line","style","right","data","partyResults","map","i","main","flexDirection","titleRow","title","majorityMeter","seatMap","flexWrap","partyMap","update","App","useState","counter","setData","useEffect","startTimer","getData","console","log","remaining","setInterval","fetch","then","res","ok","json","parties","date","j","push","nameShort","elected","votesPercent","length","seatsRemaining","k","Date","generated","MajorityMeter","toString","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.88d84cd7.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst styles = makeStyles({\r\n    seat: props=> ({\r\n        height: 20, \r\n        minWidth: '4%',\r\n        margin: '0.2%',\r\n        backgroundColor:  props.color,\r\n        flexShrink: 1\r\n    })\r\n})\r\n\r\nconst Seat = (props) => {\r\n    \r\n    const classes = styles(props)\r\n    \r\n    return <div key={`${props.party}-${props.el}`} className={classes.seat}/>\r\n}\r\n\r\nexport default Seat;","import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst styles = makeStyles({\r\n    partyContainer: {\r\n        width: '20%',\r\n\r\n    },\r\n    party: props=> ({\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        fontWeight: 'bold',\r\n        fontSize: 24,\r\n        letterSpacing: 2,\r\n        padding: '5px 5px',\r\n        margin: 1,\r\n        borderRadius: 5,\r\n        color: 'white',\r\n        justifyItems: 'center',\r\n        justifyContent: 'space-between',\r\n        backgroundColor: props.color \r\n    }),\r\n    popVote: {\r\n        padding: 5,\r\n        fontWeight: 'bold'\r\n    }\r\n})\r\n\r\nconst Party = (props) => {\r\n    \r\n    const classes = styles(props)\r\n    \r\n    return (\r\n        <div className={classes.partyContainer}>\r\n            <div className={classes.party}>\r\n                <div>{props.name}</div>\r\n                <div>{props.seats}</div>\r\n            </div>\r\n            <div className={classes.popVote}>\r\n                Pop vote: {props.votes}%\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Party;","import React from 'react'\r\n\r\nimport {makeStyles} from '@material-ui/core/styles'\r\n\r\nconst useStyles = makeStyles({\r\n    meter: {\r\n        width: '150px',\r\n        marginLeft: 10,\r\n        position: 'relative'\r\n    },\r\n    bar: {\r\n      background: (props) =>\r\n        props.color, \r\n      width: (props) => props.votes,\r\n      borderRadius: '0px 5px 5px 0px',\r\n      height: 6,\r\n      margin: 1,\r\n    },\r\n    majorityLine: {\r\n        position: 'absolute',\r\n        height: 20,\r\n        bottom: -2,\r\n        left: (props)=>props.majority,\r\n        borderLeft: '2px solid black',\r\n    },\r\n    majorityLabel: {\r\n        position: 'absolute',\r\n        // right: '50%',\r\n        textAlign: 'center',\r\n        marginTop: -22,\r\n        marginRight: -10,\r\n        fontSize: 14,\r\n        fontWeight: 'bolder'\r\n    }\r\n\r\n\r\n  });\r\n  \r\n\r\nfunction Bar(props) {\r\n    const { color, votes, ...other } = props;\r\n    const classes = useStyles(props);\r\n    return <div className={classes.bar} {...other} />;\r\n}\r\n\r\nfunction Line(props) {\r\n    const { color, majority, ...other } = props;\r\n    const classes = useStyles(props);\r\n    return <div className={classes.majorityLine} {...other} />;\r\n}\r\n\r\nconst Seat = (props) => {\r\n    \r\n    // const { color, ...other } = props;\r\n\r\n    const classes = useStyles(props)\r\n    \r\n    var lead = 61\r\n\r\n    var majority = 31/61*100\r\n\r\n    return (\r\n        <div className={classes.meter}>\r\n            <div className={classes.majorityLabel} style={{right: `${majority}%`}}>31</div>\r\n            {props.data && props.data.partyResults.map((party, i)=>{\r\n                if (i === 0) {\r\n                    lead = party.seats\r\n                    majority = `${party.seats/61*100}%`\r\n                }\r\n                if (i < 3 && party.seats > 0) {\r\n                    return <Bar color={party.color} votes={`${(party.seats/61)*100}%`} />\r\n                }\r\n            })    \r\n            }\r\n            <Line color={\"red\"} majority={`50.8%`}/>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Seat;","import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport {withStyles, makeStyles} from '@material-ui/core/styles';\r\n\r\n//Components\r\nimport Seat from './components/Seat'\r\nimport Party from './components/Party'\r\nimport MajorityMeter from './components/MajorityMeter'\r\n\r\nconst styles = makeStyles({\r\n\tmain: {\r\n\t\t// fontFamily: 'Roboto',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\tflexDirection: 'column',\r\n\t\tpadding: '20px 30px',\r\n\t\tbackgroundColor: '#f2f2f2'\r\n\t},\r\n\ttitleRow: {\r\n\t\tdisplay: 'flex', \r\n\t\tpadding: '0px 5px',\r\n\t\tjustifyContent: 'space-between'\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 26,\r\n\t\tfontWeight: 'bold'\r\n\t},\r\n\tmajorityMeter: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'flex-end',\r\n\t\ttextAlign: 'right'\r\n\t},\r\n\tseatMap: {\r\n\t\tdisplay: 'flex',\r\n\t\theight: 90,\r\n\t\tpadding: '10px 0',\r\n\t\tflexDirection: 'column-reverse',\r\n\t\tflexWrap: 'wrap',\r\n\t},\r\n\tpartyMap: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'space-evenly'\r\n\t},\r\n\tupdate: {\r\n\t\tpadding: '15px 5px'\r\n\t}\r\n})\r\n\r\nconst App = () => {\r\n\r\n\tconst classes = styles();\r\n\r\n\tconst [counter, setCounter] = useState(60)\r\n\tconst [data, setData] = useState(null)\r\n\r\n\tuseEffect(()=>{\r\n\t\tstartTimer();\r\n\t\tgetData();\r\n\t},[])\r\n\r\n\tconst startTimer = () => {\r\n\t\tconsole.log(\"updating\")\r\n\t\tlet remaining = counter\r\n\t\tsetInterval(()=>{\r\n\t\t\tremaining --;\r\n\t\t\tif (remaining <= 0) {\r\n\t\t\t\tgetData();\r\n\t\t\t\tremaining = counter.counter\r\n\t\t\t}\r\n\t\t}, 1000);\r\n\t}\r\n\r\n\tconst getData = () => {\r\n\t\tvar prefix = process.env.NODE_ENV === 'development' ? './': \"\";\r\n\r\n\t\tfetch(`/overallresults`)\r\n\t\t\t.then(res=>{\r\n\t\t\t\tif (res.ok) {\r\n\t\t\t\t\treturn res.json();\r\n\t\t\t\t} \r\n\t\t\t})\r\n\t\t\t.then(json=>\r\n\t\t\t\tsetData(json)\r\n\t\t\t)\r\n\t}\r\n\r\n\tconst seats = [];\r\n\r\n\tconst parties = [];\r\n\r\n\tvar date = ''\r\n\r\n\tif (data) {\r\n\t\tdata.partyResults.map(party=>{\r\n\t\t\tfor (let j=0; j < party.seats; j ++) {\r\n\t\t\t\tseats.push(<Seat key={`${party.nameShort}-${j}`} color={party.color} />)\r\n\t\t\t}\r\n\t\t\tparties.push(<Party name={party.nameShort} seats={party.elected} votes={party.votesPercent} color={party.color} />)\r\n\t\t})\r\n\t\tif (seats.length < 62) {\r\n\t\t\tconsole.log(seats.length)\r\n\t\t\tlet seatsRemaining = 61-seats.length\r\n\t\t\tfor (let k=0; k < seatsRemaining; k++) {\r\n\t\t\t\tseats.push(<Seat key={`none-${k}`} color={'#cccccc'}/>)\r\n\t\t\t}\r\n\t\t}\r\n\t\tdate = new Date(data.generated)\r\n\r\n\t} else {\r\n\t\tfor (let i = 0; i < 61; i++) {\r\n\t\t\tseats.push(<Seat key={`none-${i}`} color={'#cccccc'} />)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div className={classes.main}>\r\n\t\t\t<div className={classes.titleRow}>\r\n\t\t\t\t<div className={classes.title}>Saskatchewan Election 2020</div>\r\n\t\t\t\t<div className={classes.majorityMeter}>31 seats needed for majority <MajorityMeter data={data}/></div>\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.seatMap}>\r\n\t\t\t\t{seats}\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.partyMap}>\r\n\t\t\t\t{parties}\r\n\t\t\t</div>\r\n\t\t\t{/* <div className={classes.declaration}>Declaration</div> */}\r\n\t\t\t{data && <div className={classes.update}>Last updated: {date && date.toString()}</div>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App.js\";\r\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}